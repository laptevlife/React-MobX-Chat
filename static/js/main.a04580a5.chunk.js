(this["webpackJsonpreact-mobx-chat"]=this["webpackJsonpreact-mobx-chat"]||[]).push([[0],{12:function(e,s,t){e.exports={messages__block:"MessagesBlock_messages__block__Hwiyw",messages__window:"MessagesBlock_messages__window__3HdQc",messages__window__head:"MessagesBlock_messages__window__head__1lbQe",messages__window__body:"MessagesBlock_messages__window__body__3i7KN",divider:"MessagesBlock_divider__32N5I",line:"MessagesBlock_line__32Qtr",channelName:"MessagesBlock_channelName__m_np6",message__line:"MessagesBlock_message__line__2UhcT",message__box:"MessagesBlock_message__box__3lXlI",message__line__right:"MessagesBlock_message__line__right__1WDoq",messages__window__footer:"MessagesBlock_messages__window__footer__SrjsI"}},14:function(e,s,t){e.exports={rooms__sidebar:"RoomsSidebar_rooms__sidebar__2cyjg",rooms__sidebar__headline:"RoomsSidebar_rooms__sidebar__headline__1Ed05",rooms__sidebar__scrollbox:"RoomsSidebar_rooms__sidebar__scrollbox__3COQb",room__card:"RoomsSidebar_room__card__VuMtV",avatar:"RoomsSidebar_avatar__PsNNg",right__content:"RoomsSidebar_right__content__3L--k",line1:"RoomsSidebar_line1__30AsE",time:"RoomsSidebar_time__1iUBA",line2:"RoomsSidebar_line2__1LHMT",name:"RoomsSidebar_name__ydu3D",text:"RoomsSidebar_text__2BuzN",room__card__active:"RoomsSidebar_room__card__active__3kdiT"}},60:function(e,s,t){},61:function(e,s,t){},80:function(e,s,t){"use strict";t.r(s);var a=t(0),n=t.n(a),c=t(8),i=t.n(c),r=(t(60),t(61),t(41)),o=t(10);function l(){return{messages:[],pushMessage:function(e){this.messages.push(e)},getMessages:function(){return this.messages},getRooms:function(){var e=Object(o.g)(this.messages).concat(),s=[],t=[];return e.forEach((function(e,a){if(s.includes(e.roomId)){var n=s.indexOf(e.roomId);s.splice(n,1),t.splice(n,1)}s.push(e.roomId),t.push(e)})),t.reverse()},activeChat:null,setActiveChat:function(e){this.activeChat=e,this.filterRecivedMessages()},getActiveChat:function(){return this.activeChat},filterRecivedMessages:function(){var e=this;this.messages=this.messages.map((function(s){return s.roomId===e.activeChat?Object(r.a)(Object(r.a)({},s),{},{recived:!0}):s}))},notRecivedMessagesCount:function(e){return this.messages.filter((function(s){return s.roomId===e&&!1===s.recived})).length},channelFilter:"",setchannelFilter:function(e){this.channelFilter=e},getRoomMessages:function(){var e=this,s=Object(o.g)(this.messages).concat();return""!==this.channelFilter?s.filter((function(s){return s.roomId===e.activeChat})).filter((function(s){return s.channelId===e.channelFilter})):s.filter((function(s){return s.roomId===e.activeChat}))}}}var _=t(124),d=t(2),m=n.a.createContext(null),h=function(e){var s=e.children,t=Object(_.a)(l);return Object(d.jsx)(m.Provider,{value:t,children:s})},u=function(){return n.a.useContext(m)},b=t(14),j=t.n(b),g=t(23),f=t(115),v=t(126),x=Object(f.a)((function(e){return{root:{display:"flex","& > *":{margin:e.spacing(1)}},small:{width:e.spacing(3),height:e.spacing(3)},large:{width:e.spacing(7),height:e.spacing(7)}}})),O=n.a.memo((function(){var e=x();return Object(d.jsx)("div",{className:e.root,children:Object(d.jsx)(v.a,{alt:"Remy Sharp",src:"",className:e.small})})})),p=t(36),w=t.n(p),N=t(119),C=t(120),y=t(121),M=Object(f.a)((function(e){return{badge:{marginRight:"10px"},actionArea:{display:"flex",justifyContent:"center",alignItems:"center"}}})),R=n.a.memo((function(e){var s=e.room,t=u(),a=M(),n=s.roomId,c=s.sender,i=s.body,r=s.ts,o=t.notRecivedMessagesCount(n),l=r.toLocaleTimeString().slice(0,-3);return Object(_.b)((function(){return Object(d.jsx)(N.a,{className:w()(j.a.room__card,Object(g.a)({},j.a.room__card__active,n===t.getActiveChat())),onClick:function(){return t.setActiveChat(n)},children:Object(d.jsxs)(C.a,{className:a.actionArea,children:[Object(d.jsx)("div",{className:j.a.avatar,children:Object(d.jsx)(O,{})}),Object(d.jsxs)("div",{className:j.a.right__content,children:[Object(d.jsxs)("div",{className:j.a.line1,children:[Object(d.jsx)("h6",{children:n.length>14?"".concat(n.slice(0,15),"..."):n}),Object(d.jsxs)("div",{children:[Object(d.jsx)(y.a,{className:a.badge,badgeContent:o,color:"primary"}),Object(d.jsx)("div",{className:j.a.time,children:l})]})]}),Object(d.jsx)("div",{className:j.a.line2,children:Object(d.jsxs)("div",{children:[Object(d.jsxs)("span",{className:j.a.name,children:[c," - "]}),Object(d.jsx)("span",{className:j.a.text,children:i.length>35?"".concat(i.slice(0,30),"..."):i})]})})]})]})})}))})),I=n.a.memo((function(){var e=u();return Object(_.b)((function(){return Object(d.jsxs)("div",{className:j.a.rooms__sidebar,children:[Object(d.jsx)("div",{className:j.a.rooms__sidebar__headline,children:"You"}),Object(d.jsx)("div",{className:j.a.rooms__sidebar__scrollbox,children:e.getRooms().map((function(e,s){return Object(d.jsx)(R,{room:e},s)}))})]})}))})),k=t(37),S=t(12),B=t.n(S),L=t(125),F=t(123),A=Object(f.a)((function(e){return{formControl:{minWidth:220,background:"#fff"},selectEmpty:{font:"Roboto",fontSize:"14px",background:"#fff",height:"43px",display:"flex",alignItems:"center",paddingTop:"8px",paddingRight:"10px",borderBottom:"5px solid white",marginTop:e.spacing(0)}}}));function E(){var e=A(),s=n.a.useState(""),t=Object(k.a)(s,2),a=t[0],c=t[1],i=u();return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(F.a,{value:a,onChange:function(e){c(e.target.value),i.setchannelFilter(e.target.value)},displayEmpty:!0,className:e.selectEmpty,inputProps:{"aria-label":"Without label"},children:[Object(d.jsx)(L.a,{value:"",children:"ALL CHANNELS"}),Object(d.jsx)(L.a,{value:"VK",children:"VK"}),Object(d.jsx)(L.a,{value:"FB",children:"FB"}),Object(d.jsx)(L.a,{value:"OK",children:"OK"})]})})}var D=t(49),T=t(122),P=n.a.memo((function(e){var s=e.ms,t=e.index,a=u(),n=s.ts.toLocaleTimeString().slice(0,-3),c=a.getRoomMessages();return Object(_.b)((function(){return Object(d.jsxs)(d.Fragment,{children:[!(t>=1&&c[t].channelId===c[t-1].channelId)&&Object(d.jsx)(K,{channel:s.channelId}),Object(d.jsx)("div",{className:w()(B.a.message__line,Object(g.a)({},B.a.message__line__right,"You"===s.sender)),children:Object(d.jsxs)(T.a.div,{className:B.a.message__box,initial:{opacity:0,y:"10%"},animate:{opacity:1,y:"0",transition:{duration:.5}},children:[Object(d.jsx)("p",{children:s.body}),Object(d.jsx)("span",{children:n})]})})]})}))})),K=function(e){var s=e.channel;return Object(d.jsxs)("div",{className:B.a.divider,children:[Object(d.jsx)("span",{className:B.a.line}),Object(d.jsx)("span",{className:B.a.channelName,children:s}),Object(d.jsx)("span",{className:B.a.line})]})},V=n.a.memo((function(){var e=u();return Object(_.b)((function(){return Object(d.jsx)("div",{className:B.a.messages__block,children:null===e.activeChat?Object(d.jsx)(d.Fragment,{children:"Choose a chat"}):Object(d.jsx)(H,{})})}))})),H=n.a.memo((function(){var e=u(),s=n.a.useRef();n.a.useEffect((function(){return s.current.scrollIntoView({behavior:"smooth"}),e.filterRecivedMessages(),function(){return e.filterRecivedMessages()}}),[e.messages.length]);var t=n.a.useState(""),a=Object(k.a)(t,2),c=a[0],i=a[1],r=e.messages.filter((function(s){return s.roomId===e.activeChat})),o=function(s){s.preventDefault();var t={id:Object(D.a)(),roomId:e.activeChat,channelId:e.channelFilter||r[r.length-1].channelId,sender:"You",body:c,ts:new Date};i(""),e.pushMessage(t)};return Object(_.b)((function(){return Object(d.jsxs)("div",{className:B.a.messages__window,children:[Object(d.jsxs)("div",{className:B.a.messages__window__head,children:[Object(d.jsx)("span",{children:e.activeChat}),Object(d.jsx)(E,{})]}),Object(d.jsxs)("div",{className:B.a.messages__window__body,children:[e.getRoomMessages().map((function(e,s){return Object(d.jsx)(P,{ms:e,index:s},e.id)})),Object(d.jsx)("span",{ref:s})]}),Object(d.jsxs)("form",{onSubmit:o,action:"",className:B.a.messages__window__footer,children:[Object(d.jsx)("input",{onChange:function(e){return i(e.target.value)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442",value:c,type:"text"}),Object(d.jsx)("button",{onClick:o,children:Object(d.jsx)(z,{})})]})]})}))})),z=function(){return Object(d.jsx)("svg",{width:"20",height:"17",viewBox:"0 0 20 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(d.jsx)("path",{d:"M1.4 16.8849L18.85 9.40488C19.66 9.05488 19.66 7.91488 18.85 7.56488L1.4 0.0848801C0.74 -0.20512 0.00999999 0.28488 0.00999999 0.99488L0 5.60488C0 6.10488 0.37 6.53488 0.87 6.59488L15 8.48488L0.87 10.3649C0.37 10.4349 0 10.8649 0 11.3649L0.00999999 15.9749C0.00999999 16.6849 0.74 17.1749 1.4 16.8849Z",fill:"#083DCC"})})},Q=t(67).loremIpsum;var W=function(){var e=u();n.a.useEffect((function(){i()}),[]);var s=!0,t=0,a=["Perry the Platypus","Tyler Durden","Amy Pond","Le Petit Prince","Dr. Heinz Doofenshmirtz","Gregory"],c=["VK","OK","FB"];function i(){var n,l=o(a);s?s=!1:(n={id:++t,roomId:l,channelId:o(c),sender:l,recived:!1,body:Q({count:r(1,5),format:"plain",units:o(["sentences","words"])}),ts:new Date},e.pushMessage(n)),setTimeout(i,r(3e3,6e3))}function r(e,s){return Math.floor((s-e+1)*Math.random())+e}function o(e){return e[r(0,e.length-1)]}return Object(_.b)((function(){return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(I,{}),Object(d.jsx)(V,{})]})}))};i.a.render(Object(d.jsx)(h,{children:Object(d.jsx)(W,{})}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.a04580a5.chunk.js.map